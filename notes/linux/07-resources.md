# Resource Utilization

## Process Resource Monitoring

```bash
top
```

The `top` command displays real-time resource utilization of processes currently running on the system.

Using this command, we can observe:
- Number of tasks:
  - Running
  - Sleeping
  - Stopped
  - Zombie
- CPU usage breakdown:
  - `us` → User processes
  - `sy` → System (kernel) processes
  - `ni` → Nice processes
  - `id` → Idle
  - `wa` → Waiting for I/O
  - `hi` → Hardware interrupts
  - `si` → Software interrupts
  - `st` → Stolen time (virtual machines)
- Memory and swap usage

---

### Monitor a Specific Process

```bash
top -p PID
```

Displays resource utilization for a specific process.  
`PID` stands for **Process ID**.

---

## List of Open Files

```bash
lsof
```

The `lsof` (List Open Files) command:
- Displays files currently opened by processes
- Shows the association between files and processes
- Useful for debugging file locks and network connections

---

## Threads

A **thread** is the smallest execution unit within a process.

- A process can have multiple threads
- Threads share the same memory space
- Threads can execute concurrently

### Check Threads

```bash
ps -m
```

Displays threads associated with processes.

---

## Load Average

Load Average represents the **average system load over time**, not an instantaneous value.

It includes:
- Processes currently running on the CPU
- Processes waiting for CPU time
- Processes waiting for I/O

```text
1 min   5 min   15 min
```

### CPU Load

- Indicates the average number of processes waiting to be executed by the CPU
- Helps determine whether the system is overloaded

---

## Logging

System activities are recorded as **log files**.

- Logs are generally stored in the `/var/log` directory

```bash
ls /var/log
```

Logs help in:
- Troubleshooting issues
- Monitoring system behavior
- Auditing events

Logs are typically generated by the **syslog** service, implemented by the `syslogd` daemon, which forwards messages to the system logger.

---

## Logrotate

`logrotate` is used to manage large log files by:
- Rotating logs
- Compressing old logs
- Removing outdated logs
- Mailing logs if required

### Logrotate Configuration

```bash
ls /etc/logrotate.d
```

This directory contains configuration files for different services.

### Example: APT Log Rotation

```bash
cat /etc/logrotate.d/apt
```

From this configuration, we can observe:
- Rotation frequency
- Number of rotated logs to keep
- Compression settings
- File permissions

Logrotate ensures that log files do not consume excessive disk space.

